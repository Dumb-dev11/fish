<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Fish Catch Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <style>
    :root{--hud-gap:12px}
    html,body{height:100%;margin:0;padding:0}
    body{
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(#87ceeb,#006994);
      overflow:hidden;
    }

    #gameArea{
      position:relative;
      width:100%;
      height:100vh;
      touch-action: none; /* disable double-tap zoom */
    }

    #basket{
      position:absolute;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      width:120px;
      height:90px;
      background: url("basket.png") no-repeat center/cover;
      will-change: transform, left;
    }

    .fish{
      position:absolute;
      top:0;
      width:80px;
      height:60px;
      background: url("fish.png") no-repeat center/cover;
    }

    /* HUD */
    #scoreBoard{position:absolute;left:var(--hud-gap);top:var(--hud-gap);color:#fff;font-weight:700;text-shadow:0 2px 4px #000;padding:2px 6px;font-size:18px}
    #highScoreBoard{position:absolute;left:var(--hud-gap);top:46px;color:gold;font-weight:700;text-shadow:0 2px 4px #000;padding:2px 6px;font-size:16px}
    #speedBoard{position:absolute;right:var(--hud-gap);top:var(--hud-gap);color:#fff;font-weight:700;text-shadow:0 2px 4px #000;padding:2px 6px;font-size:18px}

    #countdown{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:72px;font-weight:900;color:yellow;text-shadow:3px 3px 10px #000;display:none}

    #startBtn,#restartBtn{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      padding:12px 22px;font-size:20px;border-radius:10px;border:none;background:#ffcc00;cursor:pointer;
    }
    #restartBtn{display:none}

    #hintTouch{position:absolute;left:50%;bottom:120px;transform:translateX(-50%);color:#fff;opacity:.7;font-size:14px}
    @media (min-width:800px){#hintTouch{display:none}}
  </style>
</head>
<body>
  <div id="gameArea">
    <div id="basket"></div>

    <div id="scoreBoard">Score: 0</div>
    <div id="highScoreBoard">High Score: 0</div>
    <div id="speedBoard">Speed: x1</div>

    <div id="countdown"></div>
    <button id="startBtn">Start Game</button>
    <button id="restartBtn">Restart</button>

    <div id="hintTouch">Touch and drag to move the basket</div>
  </div>

  <script>
    const gameArea = document.getElementById("gameArea");
    const basket = document.getElementById("basket");
    const scoreBoard = document.getElementById("scoreBoard");
    const highScoreBoard = document.getElementById("highScoreBoard");
    const speedBoard = document.getElementById("speedBoard");
    const countdown = document.getElementById("countdown");
    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");

    let basketWidth = basket.offsetWidth;
    let score = 0;
    let highScore = 0;
    let speedMultiplier = 1;
    let gameInterval;
    let fishInterval;
    let isPlaying = false;

    function updateBasketPosition(x) {
      let newLeft = x - basketWidth / 2;
      if (newLeft < 0) newLeft = 0;
      if (newLeft > gameArea.offsetWidth - basketWidth) newLeft = gameArea.offsetWidth - basketWidth;
      basket.style.left = newLeft + "px";
    }

    // Touch control
    gameArea.addEventListener("touchstart", (e) => {
      e.preventDefault();
      let touch = e.touches[0];
      updateBasketPosition(touch.clientX);
    }, {passive:false});

    gameArea.addEventListener("touchmove", (e) => {
      e.preventDefault();
      let touch = e.touches[0];
      updateBasketPosition(touch.clientX);
    }, {passive:false});

    // Mouse control
    document.addEventListener("mousemove", (e) => {
      updateBasketPosition(e.clientX);
    });

    function startGame() {
      score = 0;
      speedMultiplier = 1;
      scoreBoard.textContent = "Score: " + score;
      highScoreBoard.textContent = "High Score: " + highScore;
      speedBoard.textContent = "Speed: x" + speedMultiplier;

      startBtn.style.display = "none";
      restartBtn.style.display = "none";

      let count = 3;
      countdown.style.display = "block";
      countdown.textContent = count;
      let countdownInterval = setInterval(() => {
        count--;
        if (count > 0) {
          countdown.textContent = count;
        } else {
          clearInterval(countdownInterval);
          countdown.style.display = "none";
          isPlaying = true;
          gameInterval = setInterval(updateGame, 20);
          fishInterval = setInterval(createFish, 1500);
        }
      }, 1000);
    }

    function endGame() {
      isPlaying = false;
      clearInterval(gameInterval);
      clearInterval(fishInterval);

      document.querySelectorAll(".fish").forEach(f => f.remove());

      restartBtn.style.display = "block";

      if (score > highScore) {
        highScore = score;
      }
    }

    function updateGame() {
      let fishes = document.querySelectorAll(".fish");
      fishes.forEach(fish => {
        let top = parseInt(fish.style.top);
        fish.style.top = top + (2 * speedMultiplier) + "px";

        if (isColliding(fish, basket)) {
          fish.remove();
          score++;
          scoreBoard.textContent = "Score: " + score;

          if (score % 5 === 0) {
            speedMultiplier++;
            speedBoard.textContent = "Speed: x" + speedMultiplier;
          }
        } else if (top > gameArea.offsetHeight) {
          endGame();
        }
      });
    }

    function createFish() {
      let fish = document.createElement("div");
      fish.className = "fish";
      fish.style.left = Math.random() * (gameArea.offsetWidth - 80) + "px";
      fish.style.top = "0px";
      gameArea.appendChild(fish);
    }

    function isColliding(a, b) {
      let aRect = a.getBoundingClientRect();
      let bRect = b.getBoundingClientRect();
      return !(
        aRect.top > bRect.bottom ||
        aRect.bottom < bRect.top ||
        aRect.right < bRect.left ||
        aRect.left > bRect.right
      );
    }

    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", startGame);
  </script>
</body>
</html>

